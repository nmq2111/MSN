<!DOCTYPE html>
<html lang="en">
  <%- include('../partials/_head.ejs') %>

  <body class="auth-bg">
    <%- include('../partials/_pageLoader.ejs') %> <%-
    include('../partials/_navbar.ejs') %>

    <div class="page">
      <div class="page-inner">
        <div class="container-ads">
          <!-- HEADER -->
          <div class="ads-header">
            <h1 class="ads-title"><%= ads?.[0]?.category || 'Category' %></h1>

            <div class="ads-search">
              <form method="GET">
                <input
                  type="text"
                  name="q"
                  value="<%= typeof searchQuery !== 'undefined' ? searchQuery : '' %>"
                  id="adsSearch"
                  placeholder="Search"
                />
              </form>
            </div>
          </div>

          <!-- GRID -->
          <% if (ads && ads.length) { %>
          <div class="ads-grid">
            <% ads.forEach(ad => { %>
            <article class="ad-card ad-card--row">
              <!-- LEFT -->
              <div class="ad-left">
                <div>
                  <span class="ad-pill--title"><%= ad.title %></span>
                </div>

                <div class="ad-price">
                  BD <%= Number(ad.price).toFixed(2) %>
                </div>

                <div>
                  <span
                    class="ad-condition cond-<%= String(ad.condition).trim().toLowerCase() %>"
                  >
                    <%= ad.condition %>
                  </span>
                </div>

                <div class="ad-desc-box">
                  <div class="ad-desc-label">Description</div>
                  <div class="ad-desc-text"><%= ad.description %></div>
                </div>

                <!-- EXTRA INFO (index only) -->
                <div class="ad-desc-box">
                  <div class="ad-desc-label">Published by</div>
                  <div class="ad-desc-text"><%= ad.owner.username %></div>
                </div>

                <div class="ad-bottom">
                  <div class="ad-actions">
                    <a href="tel:<%= ad.owner.contactNo %>" class="btn-primary">
                      <i class="fa fa-phone"></i> Call Seller
                    </a>
                  </div>
                </div>
              </div>

              <!-- RIGHT (IMAGE) -->
              <div class="ad-right">
                <img
                  src="<%= ad.imgUrl || '/images/handshake.png' %>"
                  alt="<%= ad.title %>"
                  class="ad-image"
                />
              </div>
            </article>
            <% }) %>
          </div>
          <% } else { %>
          <p class="ads-empty">No ads found in this category.</p>
          <% } %>
        </div>
      </div>
    </div>

    <%- include('../partials/_footer.ejs') %>
  </body>
</html>
